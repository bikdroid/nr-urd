<p id="notice"><%= notice %></p>

<p>
  <b>Title:</b>
  <%= @post.title %>
</p>

<p>
  <b>Content:</b>
  <%= @post.content %>
</p>

<p>
  <b>Points:</b>
  <%= @post.points %>
</p>

<p>
  <b>Member:</b>
  <%= @post.member_id %>
</p>

<p>
    <%= @post.up_votes %> <%= link_to 'Upvote', upvote_post_path(@post)%>
    | <%= @post.down_votes %> <%= link_to 'Downvote', downvote_post_path(@post)%>
		| <%= link_to 'Unvote', unvote_post_path(@post)%>
</p>


<%= link_to 'Back to Home', posts_path %> | 

<% if @post.member_id == current_member.id %>
	<%= link_to 'Edit', edit_post_path(@post) %> |
<% end %>
   	
<% if (@post.member_id == current_member.id) || (current_member.admin == true) %>
	<%= link_to 'Remove', @post, confirm: 'Are you sure?', method: :delete %>

<% end %>

<br /><br />

<% unless @comments.blank? %>
<p> Replies so far </p>
<% @comments.each do |comment| %>
	<% if !comment.content.nil? %>
	<%= comment.content %><br />
	- <%= comment.member.name %><br />
	<p>
    <%= comment.up_votes %> <%= link_to 'Upvote', upvotecom_post_path(comment)%>
    | <%= comment.down_votes %> <%= link_to 'Downvote', downvotecom_post_path(comment)%>
		| <%= link_to 'Unvote', unvotecom_post_path(comment)%>
	</p>
	<hr />
	<% end %>
<% end %>
<% end %>

<p> Have your say </p>
<%= form_for @post do |p| %>
	<% if @post.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@post.errors.count, "error") %> prohibited this post from being saved:</h2>

      <ul>
      <% @post.errors.full_messages.each do |msg| %>
      <p id="notice"><%= notice %></p>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>
	<%= p.fields_for :comments do |c| %>
		<!-- Following 3 lines saved my life -->
		<% if c.object.new_record? %>
			<%= c.text_area :content, :rows => 4 %>
			<%= c.hidden_field :member_id, value: current_member.id %>
			<%= c.hidden_field :points, value: 0 %>
		<% end %>
	<% end %>
	<%= p.submit "Reply" %>
<% end %>

